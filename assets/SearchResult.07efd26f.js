import{u as Y,f as S,g as k,h as K,i as X,j as _,k as I,S as Z,t as ee,l as te,m as oe,n as ae,p as r,R as le,q as C,s as ne,v as re,x as se,y as ie}from"./app.83cdad53.js";function ue(o){if(Array.isArray(o)){for(var e=0,t=Array(o.length);e<o.length;e++)t[e]=o[e];return t}else return Array.from(o)}var M=!1;if(typeof window<"u"){var D={get passive(){M=!0}};window.addEventListener("testPassive",null,D),window.removeEventListener("testPassive",null,D)}var P=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),g=[],R=!1,B=-1,H=void 0,b=void 0,q=function(e){return g.some(function(t){return!!(t.options.allowTouchMove&&t.options.allowTouchMove(e))})},T=function(e){var t=e||window.event;return q(t.target)||t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)},ce=function(e){if(b===void 0){var t=!!e&&e.reserveScrollBarGap===!0,a=window.innerWidth-document.documentElement.clientWidth;t&&a>0&&(b=document.body.style.paddingRight,document.body.style.paddingRight=a+"px")}H===void 0&&(H=document.body.style.overflow,document.body.style.overflow="hidden")},de=function(){b!==void 0&&(document.body.style.paddingRight=b,b=void 0),H!==void 0&&(document.body.style.overflow=H,H=void 0)},ve=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},he=function(e,t){var a=e.targetTouches[0].clientY-B;return q(e.target)?!1:t&&t.scrollTop===0&&a>0||ve(t)&&a<0?T(e):(e.stopPropagation(),!0)},fe=function(e,t){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!g.some(function(l){return l.targetElement===e})){var a={targetElement:e,options:t||{}};g=[].concat(ue(g),[a]),P?(e.ontouchstart=function(l){l.targetTouches.length===1&&(B=l.targetTouches[0].clientY)},e.ontouchmove=function(l){l.targetTouches.length===1&&he(l,e)},R||(document.addEventListener("touchmove",T,M?{passive:!1}:void 0),R=!0)):ce(t)}},pe=function(){P?(g.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),R&&(document.removeEventListener("touchmove",T,M?{passive:!1}:void 0),R=!1),B=-1):de(),g=[]};const ye="eJyrVtJXsoISJZklOalKVkoeqTk5+QphpakBRanFxUo6Ssn5eSWpeSXFSlbRsbU6Svopqbn5KDpcgAK41BUkpqcaGOpllOTmIGsJAArrGhji1WWEQ5cRuq7aWgAlPECy";const $=()=>r(C,{name:"heading"},()=>r("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));$.displayName="HeadingIcon";const j=()=>r(C,{name:"heart"},()=>r("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));j.displayName="HeartIcon";const N=()=>r(C,{name:"history"},()=>r("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));N.displayName="HistoryIcon";const Q=()=>r(C,{name:"title"},()=>r("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));Q.displayName="TitleIcon";const me="search-pro-history",m=Y(me,[]),ge=(o=5)=>{const e=t=>{m.value.length<o?m.value=Array.from(new Set([t,...m.value])):m.value=Array.from(new Set([...m.value.slice(0,o-1),t]))};return{history:ne(m),addHistory:e}},we=S(ye),Se=k(()=>JSON.parse(re(we.value))),He={},be=300,Le={"/":{cancel:"Cancel",placeholder:"Search",search:"Search",select:"to select",navigate:"to navigate",exit:"to exit",history:"Search History",emptyHistory:"Empty Search History",emptyResult:"No results found",loading:"Loading search indexes..."}},A=(o,e)=>{const t=[];let a=0,l=0;const i=o.toLowerCase(),p=e.toLowerCase();let u=i.indexOf(p,a);const h=(s,c)=>{let n=s,f=!1;if(!c&&n.length>100&&l===0&&(n=`… ${n.slice(-10)}`),l+n.length>100){if(t.some(w=>w[0]==="strong"))return;n=n.slice(0,Math.max(100-l,1)),f=!0}n.length&&(t.push(c?["strong",n]:n),l+=n.length),f&&(t.push("…"),l+=2)};if(u<0)return null;for(;u>=0;){const s=u+p.length;if(h(o.slice(a,u),!1),h(o.slice(u,s),!0),a=s,u=i.indexOf(p,a),l>100)break}return h(o.slice(a),!1),t},z=o=>o.reduce((e,{type:t})=>e+(t==="title"?50:t==="heading"?20:t==="custom"?10:1),0),Ae=(o,e)=>{var t;const a={};for(const[l,i]of Object.entries(e)){const p=((t=e[l.replace(/\/[^\\]*$/,"")])==null?void 0:t.title)||"",u=`${p?`${p} > `:""}${i.title}`,h=A(i.title,o);h&&(a[u]=[...a[u]||[],{type:"title",path:l,display:h}]),i.customFields&&Object.entries(i.customFields).forEach(([s,c])=>{c.forEach(n=>{const f=A(n,o);f&&(a[u]=[...a[u]||[],{type:"custom",path:l,index:s,display:f}])})});for(const s of i.contents){const c=A(s.header,o);c&&(a[u]=[...a[u]||[],{type:"heading",path:l+(s.slug?`#${s.slug}`:""),display:c}]);for(const n of s.contents){const f=A(n,o);f&&(a[u]=[...a[u]||[],{type:"content",header:s.header||i.title||"Documentation",path:l+(s.slug?`#${s.slug}`:""),display:f}])}}}return Object.keys(a).sort((l,i)=>z(a[l])-z(a[i])).map(l=>({title:l,contents:a[l]}))},ke=o=>{const e=I(),t=S([]),a=k(()=>Se.value[e.value]),l=ie(i=>{t.value=i?Ae(i,a.value):[]},be);return se([o,e],()=>{l(o.value)}),t};var Te=K({name:"SearchResult",props:{query:{type:String,required:!0}},emits:["close","updateQuery"],setup(o,{emit:e}){const t=X(),a=_(),l=I(),i=Z(Le),{history:p,addHistory:u}=ge(),h=ee(o,"query"),s=ke(h),c=S(0),n=S(0),f=S(),w=k(()=>s.value.length>0),O=k(()=>s.value[c.value]||null),W=()=>{c.value=c.value>0?c.value-1:s.value.length-1,n.value=O.value.contents.length-1},F=()=>{c.value=c.value<s.value.length-1?c.value+1:0,n.value=0},J=()=>{n.value<O.value.contents.length-1?n.value=n.value+1:F()},U=()=>{n.value>0?n.value=n.value-1:W()},E=d=>d.map(v=>typeof v=="string"?v:r(v[0],v[1])),V=d=>{if(d.type==="custom"){const v=He[d.index]||"$content",[x,L=""]=typeof v=="object"?v[l.value].split("$content"):v.split("$content");return E([x,...d.display,L])}return E(d.display)};return te(()=>{oe("keydown",d=>{if(w.value){if(d.key==="ArrowUp")U();else if(d.key==="ArrowDown")J();else if(d.key==="Enter"){const v=O.value.contents[n.value].path;a.path!==v&&(t.push(v),u(h.value),e("updateQuery",""),e("close"))}}}),fe(f.value,{reserveScrollBarGap:!0})}),ae(()=>{pe()}),()=>r("div",{class:["search-pro-result",{empty:h.value===""?p.value.length===0:!w.value}],ref:f},h.value===""?p.value.length?r("ul",{class:"search-pro-result-list"},p.value.map(d=>r("li",{class:"search-pro-result-list-item"},[r("div",{class:"search-pro-result-title"},i.value.history),r("div",{class:"search-pro-result-item",onClick:()=>{e("updateQuery",d)}},[r(N,{class:"search-pro-result-type"}),r("div",{class:"search-pro-result-content"},d)])]))):i.value.emptyHistory:w.value?r("ul",{class:"search-pro-result-list"},s.value.map(({title:d,contents:v},x)=>{const L=c.value===x;return r("li",{class:["search-pro-result-list-item",{active:L}]},[r("div",{class:"search-pro-result-title"},d||"Documentation"),v.map((y,G)=>r(le,{to:y.path,class:["search-pro-result-item",{active:L&&n.value===G}],onClick:()=>{u(h.value),e("updateQuery",""),e("close")}},()=>[y.type==="content"?null:r(y.type==="title"?Q:y.type==="heading"?$:j,{class:"search-pro-result-type"}),r("div",{class:"search-pro-result-content"},[y.type==="content"?r("div",{class:"content-header"},y.header):null,r("div",V(y))])]))])})):i.value.emptyResult)}});export{Te as default};
